(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const D of c.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&a(D)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();const Ct="./boxes.svg",p=document.getElementById("app");function r(){return document.createElement("br")}function _t(){return document.createElement("h1")}function B(){return document.createElement("h2")}function b(){return document.createElement("div")}function u(){return document.createElement("input")}function g(){return document.createElement("button")}function bt(){return document.createElement("img")}function X(){return document.createElement("label")}function gt(){return document.createElement("table")}function yt(){return document.createElement("tr")}function I(){return document.createElement("th")}function Et(){return document.createElement("tbody")}function Lt(){return document.createElement("form")}function L(e,n){const t=document.createElement("div");t.textContent=e,t.className="alerta",t.style.color=n,t.style.backgroundColor="#f9f9f9",p.appendChild(t),p.appendChild(r()),setTimeout(()=>{p.removeChild(t)},3e3)}const E=X(),H=g();H.innerHTML='<i class="bi bi-x-square"></i>';E.className="boton-fijo";const N=bt();N.className="logo";N.src=`${Ct}`;const Y=_t();Y.textContent="Inicio de Sesion";const j=b(),P=Lt(),V=u();V.placeholder="Ingresa usuario";const M=u();M.placeholder="Ingresa contraseña";M.type="password";M.autocomplete="section-red shipping pass current-password";const R=g();R.textContent="Ingresar";P.addEventListener("submit",function(e){e.preventDefault()});j.appendChild(N);j.appendChild(Y);j.appendChild(P);P.appendChild(V);P.appendChild(r());P.appendChild(M);P.appendChild(r());P.appendChild(R);function xt(){p.appendChild(j)}function W(){p.removeChild(j)}const Z=B();Z.textContent="Tabla Inventario";const F=b();F.className="d-scroll";const k=gt(),y=yt(),tt=I();tt.textContent="id";const nt=I();nt.textContent="producto";const et=I();et.textContent="compra";const at=I();at.textContent="venta";const ot=I();ot.textContent="fecha";const dt=I();dt.textContent="cantidad";const rt=I();rt.textContent="acción";const h=Et(),it=B();it.textContent="Registro inventario";const i=b(),v=u();v.placeholder="codigo";const T=u();T.placeholder="Producto";const m=u();m.placeholder="Precio compra";m.type="number";const C=u();C.placeholder="Precio venta";C.type="number";const z=X();z.textContent="Fecha";z.for="fecha_a";const w=u();w.type="date";const _=u();_.type="number";_.placeholder="Cantidad";const K=g();K.textContent="guardar";const Q=g();Q.textContent="borrar";i.appendChild(it);i.appendChild(v);i.appendChild(r());i.appendChild(T);i.appendChild(r());i.appendChild(m);i.appendChild(r());i.appendChild(C);i.appendChild(r());i.appendChild(z);i.appendChild(w);i.appendChild(r());i.appendChild(_);i.appendChild(r());i.appendChild(K);i.appendChild(Q);F.appendChild(Z);F.appendChild(r());k.appendChild(y);k.appendChild(h);y.appendChild(tt);y.appendChild(nt);y.appendChild(et);y.appendChild(at);y.appendChild(ot);y.appendChild(dt);y.appendChild(rt);const ct=B();ct.textContent="Resumen ventas";const pt=b();pt.appendChild(ct);const lt=B();lt.textContent="Empleados";const U=b(),ut=B();U.appendChild(lt);U.appendChild(ut);function Tt(){p.appendChild(i),p.appendChild(F),F.appendChild(k),p.appendChild(pt),p.appendChild(U)}const d=b(),st=B();st.textContent="Vender";const A=u();A.placeholder="Busqueda";const f=u();f.placeholder="producto";const s=u();s.placeholder="Cantidad";s.type="number";const x=u();x.placeholder="Precio";x.type="number";const $=g();$.textContent="Buscar";const G=g();G.textContent="Agregar";const J=g();J.textContent="Quitar";const ht=b(),ft=g();ft.textContent="Vender e imprimir";d.appendChild(st);d.appendChild(A);d.appendChild(r());d.appendChild(f);d.appendChild(r());d.appendChild(s);d.appendChild(r());d.appendChild(x);d.appendChild(r());d.appendChild($);d.appendChild(r());d.appendChild(G);d.appendChild(J);d.appendChild(r());d.appendChild(ht);d.appendChild(r());d.appendChild(ft);const vt=B();vt.textContent="Tabla Inventario";const S=b();S.appendChild(vt);S.className="d-scroll";H.addEventListener("click",()=>location.href="./");function wt(){p.appendChild(d),S.appendChild(k),p.appendChild(S)}R.addEventListener("click",()=>{Bt()});K.addEventListener("click",()=>{let e=v.value.length,n=T.value.length,t=m.value.length,a=C.value.length,o=w.value.length,c=_.value.length;e>0&n>0&t>0&a>0&o>0&c>0?(At(),v.value="",T.value="",m.value="",C.value="",w.value="",_.value=""):L("Llenar todos los campos","red")});async function Bt(){let e=new FormData;e.append("usuario",V.value),e.append("contrasenia",M.value),await fetch("ingresar.php",{method:"POST",body:e}).then(n=>n.json()).then(n=>{n[0].perfil=="Administrador"?(E.textContent+="Administrador",p.appendChild(E),E.appendChild(H),Ft(),Ht(),Tt(),W(),L("Administrador","#000")):n[0].perfil=="Vendedor"?(E.textContent="Vendedor",p.appendChild(E),E.appendChild(H),jt(),wt(),W(),L("Vendedor","#000")):L("usuario o contraseña incorrectos","red")})}async function It(e){let n=new FormData;n.append("id_modificacion",e),await fetch("modificar.php",{method:"POST",body:n}).then(t=>t.json()).then(t=>{v.value="",T.value="",m.value="",C.value="",w.value="",_.value="",t.forEach(a=>{v.value=a.id_producto,T.value=a.producto_a,m.value=a.compra_a,C.value=a.venta_a,w.value=a.fecha_a,_.value=a.cantidad_a})})}async function Pt(e){let n=new FormData;n.append("id_modificacion",e),await fetch("modificar.php",{method:"POST",body:n}).then(t=>t.json()).then(t=>{A.value="",f.value="",s.value="",t.forEach(a=>{A.value=a.id_producto,f.value=a.producto_a,s.max=a.cantidad_a,x.value=a.venta_a})})}let l=[];async function At(){h.innerHTML="";let e=new FormData;e.append("id_producto",v.value),e.append("producto_a",T.value),e.append("compra_a",m.value),e.append("venta_a",C.value),e.append("fecha_a",w.value),e.append("cantidad_a",_.value),await fetch("guardarInventario.php",{method:"POST",body:e}).then(n=>n.json()).then(n=>{let t="";l=[],n.forEach(a=>{l.push(a.id_producto),t+="<tr>",t+="<td>"+a.id_producto+"</td>",t+="<td>"+a.producto_a+"</td>",t+="<td>"+a.compra_a+"</td>",t+="<td>"+a.venta_a+"</td>",t+="<td>"+a.fecha_a+"</td>",t+="<td>"+a.cantidad_a+"</td>",t+='<td><button class="myButton">modificar</button></td>',t+="</tr>"}),h.innerHTML=t,q()})}Q.addEventListener("click",Dt);async function Dt(){h.innerHTML="";let e=new FormData;e.append("id_producto",v.value),await fetch("eliminarinventario.php",{method:"POST",body:e}).then(n=>n.json()).then(n=>{let t="";l=[],n.forEach(a=>{l.push(a.id_producto),t+="<tr>",t+="<td>"+a.id_producto+"</td>",t+="<td>"+a.producto_a+"</td>",t+="<td>"+a.compra_a+"</td>",t+="<td>"+a.venta_a+"</td>",t+="<td>"+a.fecha_a+"</td>",t+="<td>"+a.cantidad_a+"</td>",t+='<td><button class="myButton">modificar</button></td>',t+="</tr>"}),h.innerHTML=t,q()})}async function Ft(){await fetch("inventario.php").then(e=>e.json()).then(e=>{let n="";l=[],e.forEach(t=>{l.push(t.id_producto),n+="<tr>",n+="<td>"+t.id_producto+"</td>",n+="<td>"+t.producto_a+"</td>",n+="<td>"+t.compra_a+"</td>",n+="<td>"+t.venta_a+"</td>",n+="<td>"+t.fecha_a+"</td>",n+="<td>"+t.cantidad_a+"</td>",n+='<td><button class="myButton">modificar</button></td>',n+="</tr>"}),h.innerHTML=n,q()})}async function Ot(){h.innerHTML="";let e=new FormData;e.append("id_producto",A.value),await fetch("buscarinventario.php",{method:"POST",body:e}).then(n=>n.json()).then(n=>{let t="";l=[],n.forEach(a=>{l.push(a.id_producto),t+="<tr>",t+="<td>"+a.id_producto+"</td>",t+="<td>"+a.producto_a+"</td>",t+="<td>"+a.compra_a+"</td>",t+="<td>"+a.venta_a+"</td>",t+="<td>"+a.fecha_a+"</td>",t+="<td>"+a.cantidad_a+"</td>",t+='<td><button class="myButton">modificar</button></td>',t+="</tr>"}),h.innerHTML=t,q()})}async function jt(){await fetch("inventario.php").then(e=>e.json()).then(e=>{let n="";l=[],e.forEach(t=>{l.push(t.id_producto),n+="<tr>",n+="<td>"+t.id_producto+"</td>",n+="<td>"+t.producto_a+"</td>",n+="<td>"+t.compra_a+"</td>",n+="<td>"+t.venta_a+"</td>",n+="<td>"+t.fecha_a+"</td>",n+="<td>"+t.cantidad_a+"</td>",n+='<td><button class="myButton2">Elegir</button></td>',n+="</tr>"}),h.innerHTML=n,Mt()})}function q(){document.querySelectorAll(".myButton").forEach((n,t)=>{n.onclick=()=>It(l[t])})}function Mt(){document.querySelectorAll(".myButton2").forEach((n,t)=>{n.onclick=()=>Pt(l[t])})}async function Ht(){await fetch("verusuarios.php").then(e=>e.json()).then(e=>{e.forEach(n=>{ut.innerHTML+="<div>"+n.usuario+"</div>"})})}let O=[];function mt(){console.log(O);let e="";e+="<table>",e+="<tr><th>producto</th><th>cantidad</th><th>total</th></tr>",O.forEach(n=>{e+="<tr>",e+="<td>"+n.producto+"</td>",e+="<td>"+n.cantidad+"</td>",e+="<td>"+n.total+"</td>",e+="</tr>"}),e+="</table>",ht.innerHTML=e}function St(){let e=f.value,n=O.filter(D=>D.producto===e).length,t=f.value.length,a=s.value.length,o=x.value.length,c=s.getAttribute("max");console.log(c),t>0&a>0&o>0&a<=c&n<=0?(O.push({producto:f.value,cantidad:s.value,total:s.value*x.value}),A.value="",f.value="",s.value="",x.value="",L("producto agregado","black")):L("Llenar correctamente los campos","red"),mt()}function kt(){O.pop(),L("Registro eliminado","black"),mt()}G.addEventListener("click",St);J.addEventListener("click",kt);$.addEventListener("click",Ot);xt();
